# =============================================================================
# Configuration du Local Watcher - Fichier .env.local
# =============================================================================
# Copiez ce fichier en ".env.local" à la racine du projet et ajustez les valeurs
# Le script local_watcher.py charge automatiquement .env.local au démarrage

# -----------------------------------------------------------------------------
# ALGORITHME DE SÉLECTION DES PHOTOS
# -----------------------------------------------------------------------------
# Contrôle l'algorithme automatique de sélection/filtrage des photos
# Valeurs: 1 (activé, par défaut) ou 0 (désactivé)
ENABLE_PHOTO_SELECTION=1

# -----------------------------------------------------------------------------
# Configuration de base du watcher
# -----------------------------------------------------------------------------
# URL de base de l'API
API_BASE_URL=http://localhost:8000

# Authentification (token OU username/password)
PHOTOGRAPHER_TOKEN=your_token_here
# PHOTOGRAPHER_USERNAME=photographer
# PHOTOGRAPHER_PASSWORD=your_password

# Mode Agent (recommandé) : Label de la machine pour récupérer les watchers du serveur
MACHINE_LABEL=studio-principal

# Mode Legacy : Répertoire à surveiller et ID événement (si MACHINE_LABEL non défini)
# WATCH_DIR=/path/to/photos
# EVENT_ID=1

# ID du watcher (optionnel, pour statistiques)
# WATCHER_ID=1

# Déplacer les photos uploadées vers ce dossier (optionnel)
# MOVE_UPLOADED_DIR=/path/to/uploaded

# -----------------------------------------------------------------------------
# Paramètres de qualité technique (si ENABLE_PHOTO_SELECTION=1)
# -----------------------------------------------------------------------------
# Résolution minimale
MIN_WIDTH=640
MIN_HEIGHT=480

# Netteté (variance Laplacian, plus élevé = plus strict)
MIN_SHARPNESS=30.0

# Luminosité (échelle 0-255)
MIN_BRIGHTNESS=20.0
MAX_BRIGHTNESS=235.0

# -----------------------------------------------------------------------------
# Détection de doublons (si ENABLE_PHOTO_SELECTION=1)
# -----------------------------------------------------------------------------
# Seuil de similarité (distance Hamming, 0-64)
SIMILARITY_THRESHOLD=8

# -----------------------------------------------------------------------------
# Qualité des visages (si ENABLE_PHOTO_SELECTION=1)
# -----------------------------------------------------------------------------
# Score minimal de qualité des visages (0-1)
FACE_SCORE_MIN=0.35

# Taille minimale du visage (% de l'image totale)
FACE_MIN_RELATIVE_SIZE=0.02

# Inclinaison maximale du visage (degrés)
MAX_FACE_ROLL_DEG=20.0

# Distance entre les yeux (% de la largeur du visage)
MIN_EYE_DISTANCE_RATIO=0.20
MAX_EYE_DISTANCE_RATIO=0.70

# Position verticale des yeux (% de la hauteur du visage)
MIN_EYE_Y_RATIO=0.10
MAX_EYE_Y_RATIO=0.60

# -----------------------------------------------------------------------------
# Dossiers de rejet (si ENABLE_PHOTO_SELECTION=1)
# -----------------------------------------------------------------------------
# Photos rejetées sont déplacées ici (relatif au dossier surveillé)
REJECTED_DUPLICATE_DIR=.rejected_duplicates
REJECTED_LOW_QUALITY_DIR=.rejected_low_quality
REJECTED_LOW_FACE_QUALITY_DIR=.rejected_low_face_quality

# -----------------------------------------------------------------------------
# Debug et diagnostics
# -----------------------------------------------------------------------------
# Activer le mode debug (1) pour voir les détails de chaque photo traitée
WATCHER_DEBUG=0

# Dossier pour les rapports de debug (si WATCHER_DEBUG=1)
# WATCHER_DEBUG_DIR=.watcher_reports

# Logs verbeux pour l'agent
WATCHER_AGENT_VERBOSE=1

# Logger les erreurs
WATCHER_LOG_ERRORS=1

# -----------------------------------------------------------------------------
# Paramètres avancés
# -----------------------------------------------------------------------------
# Temps d'attente pour qu'un fichier soit stable (secondes)
WATCHER_STABLE_SECONDS=2

