â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ACTION IMMÃ‰DIATE : RedÃ©ployer avec Version de Diagnostic     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ OBJECTIF
DÃ©ployer la version v87 qui contient :
  âœ“ Endpoint /api/health-check (diagnostic)
  âœ“ Meilleur logging sur /api/login (affiche l'erreur exacte)
  âœ“ ModÃ¨le avec event_id et contraintes composites

ğŸ“‹ COMMANDES (Copy-Paste)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

cd face_recognition/app

# 1. Build
docker build -t findme-prod:v87 .

# 2. Tag
docker tag findme-prod:v87 801541932532.dkr.ecr.eu-west-3.amazonaws.com/findme-prod:v87

# 3. Login ECR
aws ecr get-login-password --region eu-west-3 | docker login --username AWS --password-stdin 801541932532.dkr.ecr.eu-west-3.amazonaws.com

# 4. Push
docker push 801541932532.dkr.ecr.eu-west-3.amazonaws.com/findme-prod:v87

# 5. Modifier update-image.json ligne 6:
#    "ImageIdentifier": "801541932532.dkr.ecr.eu-west-3.amazonaws.com/findme-prod:v87",

# 6. Update service
cd ../..
aws apprunner update-service --cli-input-json file://face_recognition/app/update-image.json --region eu-west-3

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â±ï¸  DURÃ‰E : 15 minutes (build + push + dÃ©ploiement AWS)

âœ… APRÃˆS LE DÃ‰PLOIEMENT

1. Tester le health-check:
   https://g62bncafk2.eu-west-3.awsapprunner.com/api/health-check

   RÃ©sultat attendu : { "status": "healthy" }

2. Tester le login:
   L'erreur dÃ©taillÃ©e sera maintenant visible dans le message

3. Si toujours erreur 500:
   â†’ L'erreur exacte sera dans le message JSON
   â†’ Partager cette erreur pour diagnostic prÃ©cis

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ’¡ ASTUCE
Si tu n'as pas AWS CLI, utilise la console AWS App Runner :
  1. Aller sur https://console.aws.amazon.com/apprunner/
  2. RÃ©gion : eu-west-3
  3. Service : findme-prod-v7
  4. Operations â†’ Deploy â†’ Manual deployment
  5. Update source â†’ Update image URI â†’ v87

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

